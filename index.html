<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buchhaltungs-Abkürzungen (DE-AR)</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-dark: #2c3e50;
            --primary-light: #34495e;
            --accent: #3498db;
            --accent-hover: #2980b9;
            --white: #ffffff;
            --gray-light: #f8f9fa;
            --gray-border: #e0e0e0;
            --success: #27ae60;
            --error: #c0392b;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--gray-light);
            color: var(--primary-dark);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Arabischer Text Stil */
        .ar-text {
            font-family: 'Cairo', sans-serif;
            direction: rtl;
        }

        /* Header */
        header {
            background-color: var(--primary-dark);
            color: var(--white);
            padding: 1rem;
            text-align: center;
            box-shadow: var(--shadow);
        }

        header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 0.9rem;
            opacity: 0.8;
            font-family: 'Cairo', sans-serif;
        }

        /* Navigation */
        nav {
            background-color: var(--primary-light);
            display: flex;
            justify-content: center;
            padding: 0.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav button {
            background: none;
            border: none;
            color: var(--white);
            padding: 0.8rem 1.5rem;
            margin: 0 0.2rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 4px;
            transition: background 0.3s;
        }

        nav button:hover, nav button.active {
            background-color: var(--accent);
        }

        /* Main Container */
        main {
            flex: 1;
            max-width: 800px;
            width: 100%;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .view-section {
            display: none; /* Standardmäßig versteckt */
            animation: fadeIn 0.4s ease-in-out;
        }

        .view-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Wörterbuch (Dictionary) Styles --- */
        .search-container {
            margin-bottom: 1.5rem;
        }

        .search-container input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--gray-border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .search-container input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .table-container {
            background: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow);
            overflow: hidden;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--gray-border);
        }

        th {
            background-color: var(--primary-light);
            color: var(--white);
            font-weight: 600;
        }

        tr:hover {
            background-color: #f1f8ff;
        }

        .td-ar {
            text-align: right;
            direction: rtl;
            font-family: 'Cairo', sans-serif;
            color: var(--primary-dark);
        }

        .abbr-badge {
            background-color: var(--accent);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
            display: inline-block;
        }

        /* --- Flashcards Styles --- */
        .flashcard-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 400px;
        }

        .scene {
            width: 100%;
            max-width: 400px;
            height: 250px;
            perspective: 600px;
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card__face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .card__face--front {
            background-color: var(--white);
            color: var(--primary-dark);
            border: 2px solid var(--accent);
        }

        .card__face--front h2 {
            font-size: 3rem;
            color: var(--accent);
        }

        .card__face--front p {
            color: #7f8c8d;
            margin-top: 10px;
        }

        .card__face--back {
            background-color: var(--accent);
            color: white;
            transform: rotateY(180deg);
        }

        .card__face--back .de-term {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .card__face--back .ar-term {
            font-size: 1.4rem;
            font-family: 'Cairo', sans-serif;
            direction: rtl;
        }

        .controls {
            margin-top: 2rem;
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 10px 20px;
            background-color: var(--primary-dark);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }

        .btn:hover {
            background-color: var(--primary-light);
        }

        /* --- Quiz Styles --- */
        .quiz-container {
            background: var(--white);
            padding: 2rem;
            border-radius: 8px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .quiz-header {
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--gray-border);
            padding-bottom: 1rem;
        }

        .question-box {
            margin-bottom: 2rem;
        }

        .question-box h2 {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        @media (min-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .option-btn {
            background-color: var(--gray-light);
            border: 2px solid var(--gray-border);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-size: 1.1rem;
            transition: all 0.2s;
            direction: rtl;
        }

        .option-btn:hover:not([disabled]) {
            border-color: var(--accent);
            background-color: #eaf6ff;
        }

        .option-btn.correct {
            background-color: var(--success) !important;
            color: white !important;
            border-color: var(--success) !important;
        }

        .option-btn.wrong {
            background-color: var(--error) !important;
            color: white !important;
            border-color: var(--error) !important;
        }

        .quiz-feedback {
            margin-top: 1.5rem;
            font-weight: bold;
            min-height: 2rem;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 1.5rem;
            background-color: var(--primary-dark);
            color: #bdc3c7;
            font-size: 0.8rem;
            margin-top: auto;
        }
    </style>
</head>
<body>

<header>
    <h1>Buchhaltung Abkürzungen</h1>
    <p>Deutsch - Arabisch / ألماني - عربي</p>
</header>

<nav>
    <button class="nav-btn active" onclick="switchTab('dictionary')">Wörterbuch / قاموس</button>
    <button class="nav-btn" onclick="switchTab('flashcards')">Karteikarten / بطاقات</button>
    <button class="nav-btn" onclick="switchTab('quiz')">Quiz / اختبار</button>
</nav>

<main>
    <section id="dictionary" class="view-section active">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Suche (z.B. AfA, Umsatzsteuer, ضريبة)...">
        </div>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Abk.</th>
                        <th>Deutsch</th>
                        <th style="text-align: right;">Arabisch</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    </tbody>
            </table>
        </div>
    </section>

    <section id="flashcards" class="view-section">
        <div class="flashcard-container">
            <div class="scene">
                <div class="card" id="flashcard">
                    <div class="card__face card__face--front">
                        <h2 id="fc-abbr">AfA</h2>
                        <p>Klicken zum Umdrehen / انقر للقلب</p>
                    </div>
                    <div class="card__face card__face--back">
                        <div class="de-term" id="fc-de">Absetzung für Abnutzung</div>
                        <div class="ar-term" id="fc-ar">الإهلاك (خصم للتآكل)</div>
                    </div>
                </div>
            </div>
            <div class="controls">
                <button class="btn" onclick="prevCard()">&#8592; Zurück</button>
                <button class="btn" onclick="nextCard()">Weiter &#8594;</button>
            </div>
            <p style="margin-top: 1rem; color: #7f8c8d;" id="fc-counter">1 / 50</p>
        </div>
    </section>

    <section id="quiz" class="view-section">
        <div class="quiz-container">
            <div class="quiz-header">
                <span>Punkte: <strong id="score">0</strong></span>
            </div>
            <div class="question-box">
                <p>Was bedeutet diese Abkürzung?</p>
                <h2 id="quiz-abbr">?</h2>
            </div>
            <div class="options-grid" id="quiz-options">
                </div>
            <div class="quiz-feedback" id="quiz-feedback"></div>
            <button class="btn" id="next-quiz-btn" style="display: none; margin: 10px auto;" onclick="generateQuizQuestion()">Nächste Frage</button>
        </div>
    </section>
</main>

<footer>
    &copy; 2026 Accounting Learning Tool. Basierend auf dem bereitgestellten Abkürzungsverzeichnis.
</footer>

<script>
    /**
     * Datenbasis extrahiert aus dem bereitgestellten PDF.
     * [span_3](start_span)[span_4](start_span)[span_5](start_span)Quellen[span_3](end_span)[span_4](end_span)[span_5](end_span)
     */
    const data = [
        { abbr: "AB", de: "Anfangsbestand", ar: "رصيد أول المدة" },
        { abbr: "AfA", de: "Absetzung für Abnutzung", ar: "الإهلاك (نقص القيمة نتيجة الاستخدام)" },
        { abbr: "AG", de: "Aktiengesellschaft", ar: "شركة مساهمة" },
        { abbr: "AktG", de: "Aktiengesetz", ar: "قانون الشركات المساهمة" },
        { abbr: "AK", de: "Anschaffungskosten", ar: "تكاليف الشراء / تكلفة الاقتناء" },
        { abbr: "ANK", de: "Anschaffungsnebenkosten", ar: "تكاليف الشراء الإضافية (النثرية)" },
        { abbr: "AO", de: "Abgabenordnung", ar: "القانون الضريبي العام" },
        { abbr: "AR", de: "Ausgangsrechnung", ar: "فاتورة صادرة (مبيعات)" },
        { abbr: "AV", de: "Anlagevermögen", ar: "الأصول الثابتة" },
        { abbr: "BGA", de: "Betriebs- und Geschäftsausstattung", ar: "أثاث وتجهيزات مكتبية وتجارية" },
        { abbr: "BilMoG", de: "Bilanzrechtsmodernisierungsgesetz", ar: "قانون تحديث قانون المحاسبة" },
        { abbr: "BMF", de: "Bundesministerium der Finanzen", ar: "وزارة المالية الاتحادية" },
        { abbr: "BS", de: "Bestandskonto", ar: "حساب الرصيد" },
        { abbr: "BV", de: "Betriebsvermögen", ar: "أصول الشركة / ممتلكات المنشأة" },
        { abbr: "BWA", de: "Betriebswirtschaftliche Auswertung", ar: "التحليل الاقتصادي للأعمال" },
        { abbr: "DATEV", de: "Datenverarbeitungsorganisation", ar: "نظام داتف (برنامج محاسبة شهير)" },
        { abbr: "EK", de: "Eigenkapital", ar: "رأس المال الخاص / حقوق الملكية" },
        { abbr: "ER", de: "Eingangsrechnung", ar: "فاتورة واردة (مشتريات)" },
        { abbr: "ESt", de: "Einkommensteuer", ar: "ضريبة الدخل" },
        { abbr: "EStG", de: "Einkommensteuergesetz", ar: "قانون ضريبة الدخل" },
        { abbr: "FK", de: "Fremdkapital", ar: "رأس المال الأجنبي / الخصوم / الالتزامات" },
        { abbr: "GewSt", de: "Gewerbesteuer", ar: "ضريبة التجارة / ضريبة الأعمال" },
        { abbr: "GmbH", de: "Gesellschaft mit beschränkter Haftung", ar: "شركة ذات مسؤولية محدودة" },
        { abbr: "GoB", de: "Grundsätze ordnungsgemäßer Buchführung", ar: "مبادئ المحاسبة النظامية" },
        { abbr: "GuV", de: "Gewinn- und Verlustrechnung", ar: "حساب الأرباح والخسائر" },
        { abbr: "GWG", de: "Geringwertiges Wirtschaftsgut", ar: "أصل اقتصادي قليل القيمة" },
        { abbr: "H", de: "Haben", ar: "دائن (له)" },
        { abbr: "HB", de: "Handelsbilanz", ar: "الميزانية التجارية" },
        { abbr: "HGB", de: "Handelsgesetzbuch", ar: "القانون التجاري الألماني" },
        { abbr: "HK", de: "Herstellungskosten", ar: "تكاليف التصنيع / الإنتاج" },
        { abbr: "KSt", de: "Körperschaftsteuer", ar: "ضريبة الشركات" },
        { abbr: "K", de: "Kontokorrent", ar: "حساب جاري" },
        { abbr: "KG", de: "Kommanditgesellschaft", ar: "شركة توصية" },
        { abbr: "LSt", de: "Lohnsteuer", ar: "ضريبة الرواتب / الأجور" },
        { abbr: "OHG", de: "Offene Handelsgesellschaft", ar: "شركة تضامن" },
        { abbr: "Rz.", de: "Randziffer", ar: "رقم الفقرة الهامشية" },
        { abbr: "S", de: "Soll", ar: "مدين (منه)" },
        { abbr: "SBK", de: "Schlussbilanzkonto", ar: "حساب الميزانية الختامية" },
        { abbr: "SKR", de: "Spezialkontenrahmen", ar: "دليل الحسابات الخاص (إطار محاسبي)" },
        { abbr: "SV", de: "Sozialversicherung", ar: "التأمين الاجتماعي" },
        { abbr: "USt", de: "Umsatzsteuer", ar: "ضريبة المبيعات / القيمة المضافة" },
        { abbr: "USt-IdNr", de: "Umsatzsteuer-Identifikationsnummer", ar: "رقم التعريف الضريبي" },
        { abbr: "UV", de: "Umlaufvermögen", ar: "الأصول المتداولة" },
        { abbr: "VoSt", de: "Vorsteuer", ar: "ضريبة المدخلات (المخصومة)" },
        { abbr: "VZ", de: "Veranlagungszeitraum", ar: "الفترة الضريبية / فترة التقييم" },
        { abbr: "WP", de: "Wirtschaftsprüfer", ar: "مدقق حسابات / محاسب قانوني" },
        { abbr: "ZM", de: "Zusammenfassende Meldung", ar: "التقرير الملخص (للضريبة داخل الاتحاد الأوروبي)" }
    ];

    // --- State Management ---
    let currentTab = 'dictionary';
    let currentCardIndex = 0;
    let quizScore = 0;
    let currentQuizItem = null;

    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        renderDictionary(data);
        renderFlashcard();
        generateQuizQuestion();
    });

    // --- Navigation Logic ---
    function switchTab(tabName) {
        // Hide all sections
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));

        // Show selected section
        document.getElementById(tabName).classList.add('active');
        
        // Find button that calls this function (rough approximation for simplicity)
        const buttons = document.querySelectorAll('.nav-btn');
        if(tabName === 'dictionary') buttons[0].classList.add('active');
        if(tabName === 'flashcards') buttons[1].classList.add('active');
        if(tabName === 'quiz') buttons[2].classList.add('active');
    }

    // --- Dictionary Logic ---
    const tableBody = document.getElementById('tableBody');
    const searchInput = document.getElementById('searchInput');

    function renderDictionary(items) {
        tableBody.innerHTML = '';
        if (items.length === 0) {
            tableBody.innerHTML = '<tr><td colspan="3" style="text-align:center;">Keine Ergebnisse gefunden</td></tr>';
            return;
        }
        items.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><span class="abbr-badge">${item.abbr}</span></td>
                <td>${item.de}</td>
                <td class="td-ar">${item.ar}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    searchInput.addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        const filtered = data.filter(item => 
            item.abbr.toLowerCase().includes(term) || 
            item.de.toLowerCase().includes(term) || 
            item.ar.includes(term)
        );
        renderDictionary(filtered);
    });

    // --- Flashcards Logic ---
    const flashcardElement = document.getElementById('flashcard');
    const fcAbbr = document.getElementById('fc-abbr');
    const fcDe = document.getElementById('fc-de');
    const fcAr = document.getElementById('fc-ar');
    const fcCounter = document.getElementById('fc-counter');

    flashcardElement.addEventListener('click', () => {
        flashcardElement.classList.toggle('is-flipped');
    });

    function renderFlashcard() {
        const item = data[currentCardIndex];
        // Reset flip state
        flashcardElement.classList.remove('is-flipped');
        
        // Small timeout to allow flip reset before content change (optional, better UX)
        setTimeout(() => {
            fcAbbr.textContent = item.abbr;
            fcDe.textContent = item.de;
            fcAr.textContent = item.ar;
            fcCounter.textContent = `${currentCardIndex + 1} / ${data.length}`;
        }, 200);
    }

    window.nextCard = function() {
        currentCardIndex = (currentCardIndex + 1) % data.length;
        renderFlashcard();
    }

    window.prevCard = function() {
        currentCardIndex = (currentCardIndex - 1 + data.length) % data.length;
        renderFlashcard();
    }

    // --- Quiz Logic ---
    const quizAbbr = document.getElementById('quiz-abbr');
    const quizOptions = document.getElementById('quiz-options');
    const quizFeedback = document.getElementById('quiz-feedback');
    const scoreDisplay = document.getElementById('score');
    const nextQuizBtn = document.getElementById('next-quiz-btn');

    window.generateQuizQuestion = function() {
        // Reset UI
        quizFeedback.textContent = '';
        nextQuizBtn.style.display = 'none';
        
        // Pick random question
        const randomIndex = Math.floor(Math.random() * data.length);
        currentQuizItem = data[randomIndex];
        quizAbbr.textContent = currentQuizItem.abbr;

        // Generate options (1 correct + 3 wrong)
        let options = [currentQuizItem];
        while (options.length < 4) {
            const randomDistractor = data[Math.floor(Math.random() * data.length)];
            if (!options.includes(randomDistractor)) {
                options.push(randomDistractor);
            }
        }

        // Shuffle options
        options.sort(() => Math.random() - 0.5);

        // Render buttons
        quizOptions.innerHTML = '';
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.textContent = opt.ar;
            btn.onclick = () => checkAnswer(opt, btn);
            quizOptions.appendChild(btn);
        });
    }

    function checkAnswer(selectedOption, btnElement) {
        // Disable all buttons to prevent multiple guesses
        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(btn => btn.disabled = true);

        if (selectedOption.abbr === currentQuizItem.abbr) {
            // Correct
            btnElement.classList.add('correct');
            quizFeedback.textContent = 'Richtig! / إجابة صحيحة';
            quizFeedback.style.color = 'var(--success)';
            quizScore++;
            scoreDisplay.textContent = quizScore;
        } else {
            // Wrong
            btnElement.classList.add('wrong');
            quizFeedback.textContent = `Falsch. Richtig war: ${currentQuizItem.ar}`;
            quizFeedback.style.color = 'var(--error)';
            
            // Highlight the correct one
            allBtns.forEach(btn => {
                if (btn.textContent === currentQuizItem.ar) {
                    btn.classList.add('correct');
                }
            });
        }
        nextQuizBtn.style.display = 'block';
    }

</script>

</body>
</html>
