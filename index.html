<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Accounting Pro | BuchfÃ¼hrung</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* Modern Palette */
            --primary: #4f46e5; /* Indigo */
            --primary-dark: #3730a3;
            --accent: #0ea5e9; /* Sky Blue */
            --accent-gradient: linear-gradient(135deg, #4f46e5 0%, #0ea5e9 100%);
            --glass: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.5);
            --bg: #f3f4f6;
            --text: #1e293b;
            --text-light: #64748b;
            --success: #10b981;
            --danger: #ef4444;
            --gold: #f59e0b;
            --card-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.01);
            --radius: 20px;
            --nav-height: 70px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- TYPOGRAPHY --- */
        .ar { font-family: 'Cairo', sans-serif; direction: rtl; }
        .de { font-family: 'Inter', sans-serif; }
        h1, h2, h3 { color: var(--text); letter-spacing: -0.5px; }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

        /* --- SIDEBAR (Desktop) --- */
        .sidebar {
            width: 280px;
            background: var(--text); /* Dark theme for sidebar */
            color: #fff;
            display: flex;
            flex-direction: column;
            padding: 30px 20px;
            z-index: 100;
        }
        .brand {
            font-size: 1.6rem;
            font-weight: 800;
            margin-bottom: 50px;
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .nav-links { list-style: none; flex: 1; }
        .nav-item {
            padding: 16px 20px;
            margin-bottom: 8px;
            border-radius: 16px;
            cursor: pointer;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1rem;
            color: #94a3b8;
            font-weight: 500;
        }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: #fff; }
        .nav-item.active { 
            background: var(--accent-gradient); 
            color: #fff; 
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4);
        }

        /* --- MAIN LAYOUT --- */
        .main-content {
            flex: 1;
            overflow-y: auto;
            position: relative;
            background: var(--bg);
            padding-bottom: calc(var(--nav-height) + 30px);
        }
        
        /* Mobile Header */
        .header {
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            padding: 15px 25px;
            position: sticky;
            top: 0;
            z-index: 50;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .page-title { font-size: 1.4rem; font-weight: 800; color: var(--text); }
        .lang-badge { 
            font-size: 0.8rem; font-weight: 700; 
            background: #e0e7ff; color: var(--primary); 
            padding: 5px 12px; border-radius: 20px; 
        }

        .container { padding: 25px; max-width: 1000px; margin: 0 auto; }

        /* --- SECTIONS ANIMATION --- */
        .section-view { display: none; animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        .section-view.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: 0; } }

        /* --- DASHBOARD --- */
        .welcome-card {
            background: var(--accent-gradient);
            color: white;
            padding: 30px;
            border-radius: var(--radius);
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(79, 70, 229, 0.3);
            position: relative;
            overflow: hidden;
        }
        .welcome-card::after {
            content: ''; position: absolute; top: -50%; right: -20%;
            width: 200px; height: 200px; background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }

        .stat-grid {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px;
        }
        .stat-card {
            background: var(--white);
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: var(--card-shadow);
            border: 1px solid white;
            transition: transform 0.2s;
            cursor: pointer;
        }
        .stat-card:active { transform: scale(0.96); }
        .stat-val { font-size: 2rem; font-weight: 800; color: var(--primary); margin-bottom: 5px; }
        .stat-label { font-size: 0.95rem; color: var(--text-light); font-weight: 500; }

        /* --- CARDS & LISTS --- */
        .card-modern {
            background: #fff;
            border-radius: var(--radius);
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.6);
        }
        
        .chapter-header {
            padding: 25px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; background: #fff;
        }
        .chapter-title { font-size: 1.1rem; font-weight: 700; color: var(--text); margin-bottom: 4px; }
        .chapter-sub { font-size: 0.9rem; color: var(--text-light); }
        .chapter-content { display: none; padding: 0 25px 25px 25px; background: #fff; }
        
        .term-box {
            background: #f8fafc; padding: 15px; border-radius: 12px;
            margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;
        }
        .tag {
            background: #e0e7ff; color: var(--primary); padding: 4px 10px;
            border-radius: 8px; font-size: 0.8rem; font-weight: 700;
        }

        /* --- DICTIONARY --- */
        .search-sticky {
            position: sticky; top: 80px; z-index: 40; 
            padding-bottom: 15px; background: var(--bg);
            margin: 0 -10px; padding: 0 10px 15px 10px; /* Hack for spacing */
        }
        .search-input {
            width: 100%; padding: 18px 25px; border-radius: 50px; border: none;
            background: #fff; box-shadow: var(--card-shadow); font-size: 1rem;
            color: var(--text); transition: 0.3s;
        }
        .search-input:focus { box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2); }

        .dict-group-title {
            margin: 25px 0 10px 10px; font-size: 1.2rem; font-weight: 800; color: var(--text-light);
        }
        .dict-item {
            background: #fff; padding: 20px; margin-bottom: 12px;
            border-radius: 16px; display: flex; flex-direction: column; gap: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03); transition: transform 0.2s;
        }
        .dict-item:active { transform: scale(0.98); }
        .dict-top { display: flex; justify-content: space-between; align-items: center; }
        .dict-abbr { 
            font-size: 1.1rem; font-weight: 800; color: var(--primary); 
            background: #eef2ff; padding: 6px 14px; border-radius: 10px;
        }

        /* --- FLASHCARDS 3D --- */
        .fc-container {
            height: 60vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .flashcard {
            width: 100%; max-width: 400px; height: 320px; perspective: 1500px; cursor: pointer;
        }
        .fc-inner {
            position: relative; width: 100%; height: 100%; text-align: center;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            transform-style: preserve-3d;
        }
        .fc-inner.flipped { transform: rotateY(180deg); }
        .fc-face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            border-radius: 30px; display: flex; flex-direction: column; justify-content: center; align-items: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1); padding: 30px;
            background: #fff; border: 1px solid rgba(255,255,255,0.5);
        }
        .fc-front { background: white; }
        .fc-back { 
            transform: rotateY(180deg); 
            background: var(--accent-gradient); 
            color: white; 
        }
        .fc-controls {
            margin-top: 40px; display: flex; gap: 20px;
        }
        .btn-circle {
            width: 60px; height: 60px; border-radius: 50%; border: none;
            background: white; box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            color: var(--primary); font-size: 1.5rem; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: 0.2s;
        }
        .btn-circle:active { transform: scale(0.9); }

        /* --- EXAM --- */
        .option-btn {
            width: 100%; padding: 18px; margin-bottom: 12px;
            border: 2px solid transparent; background: white;
            border-radius: 16px; text-align: left; font-size: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
            font-weight: 500; transition: 0.2s;
        }
        .option-btn.selected { border-color: var(--primary); background: #eef2ff; }
        .option-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .option-btn.wrong { background: var(--danger); color: white; border-color: var(--danger); }

        /* --- BOTTOM NAV (Mobile) --- */
        .bottom-nav {
            display: none;
            position: fixed; bottom: 0; left: 0; width: 100%; height: 80px;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
            z-index: 1000;
            justify-content: space-around;
            padding-bottom: 15px; /* Safe area */
        }
        .b-nav-item {
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: var(--text-light); transition: 0.3s;
        }
        .b-nav-icon { 
            font-size: 1.5rem; margin-bottom: 4px; padding: 8px 20px; border-radius: 20px; transition: 0.3s;
        }
        .b-nav-item.active .b-nav-icon { 
            background: #eef2ff; color: var(--primary); transform: translateY(-5px);
        }
        .b-nav-item.active span { font-weight: 700; color: var(--primary); font-size: 0.75rem; }
        .b-nav-item span { font-size: 0.7rem; font-weight: 500; }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .bottom-nav { display: flex; }
            .main-content { padding-top: 0; }
            .stat-grid { grid-template-columns: 1fr 1fr; }
            .container { padding: 20px; }
            .search-sticky { top: 75px; } /* Adjust for header */
        }
        @media (min-width: 769px) {
            .header { display: none; }
        }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="brand">
            <span>ğŸ“ˆ</span> AccountingPro
        </div>
        <ul class="nav-links">
            <li class="nav-item active" onclick="nav('dashboard')"><span>ğŸ </span> Ãœbersicht</li>
            <li class="nav-item" onclick="nav('learn')"><span>ğŸ“–</span> Lernen</li>
            <li class="nav-item" onclick="nav('dictionary')"><span>ğŸ”</span> WÃ¶rterbuch</li>
            <li class="nav-item" onclick="nav('flashcards')"><span>ğŸ§ </span> Flashcards</li>
            <li class="nav-item" onclick="nav('exam')"><span>ğŸ“</span> PrÃ¼fung</li>
        </ul>
    </nav>

    <main class="main-content">
        <header class="header">
            <div class="page-title" id="header-title">Dashboard</div>
            <div class="lang-badge">DE | AR</div>
        </header>

        <section id="dashboard" class="section-view active container">
            <div class="welcome-card">
                <h2 class="ar" style="margin-bottom:10px; font-weight:800; font-size:1.8rem;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!</h2>
                <p class="ar" style="opacity:0.95; font-size:1rem; line-height:1.6;">
                    Ù…Ø±Ø¬Ø¹Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©.<br>
                    ØªÙ… ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªØ´Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ù…Ù† A Ø¥Ù„Ù‰ Z.
                </p>
            </div>

            <div class="stat-grid">
                <div class="stat-card" onclick="nav('dictionary')">
                    <div class="stat-val" id="total-terms">0</div>
                    <div class="stat-label ar">Ù…ØµØ·Ù„Ø­ Ù…Ø­Ø§Ø³Ø¨ÙŠ</div>
                </div>
                <div class="stat-card" onclick="nav('learn')">
                    <div class="stat-val">2</div>
                    <div class="stat-label ar">Ø¯Ø±ÙˆØ³ ØªØ¹Ù„ÙŠÙ…ÙŠØ©</div>
                </div>
                <div class="stat-card" onclick="nav('exam')">
                    <div class="stat-val">Test</div>
                    <div class="stat-label ar">Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ</div>
                </div>
                <div class="stat-card" onclick="nav('flashcards')">
                    <div class="stat-val">âˆ</div>
                    <div class="stat-label ar">Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠØ©</div>
                </div>
            </div>
            
            <div style="margin-top:10px;">
                <h3 class="ar" style="margin-bottom:15px; color:var(--text);">Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h3>
                <div class="card-modern" onclick="nav('learn')" style="padding:0;">
                    <div class="chapter-header">
                        <div>
                            <div class="chapter-title">1.2 Aufgaben der BuchfÃ¼hrung</div>
                            <p class="ar chapter-sub">Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©: Ø§Ù„ØªÙˆØ«ÙŠÙ‚ØŒ Ø§Ù„Ø±Ù‚Ø§Ø¨Ø©ØŒ Ø§Ù„ØªØ®Ø·ÙŠØ·</p>
                        </div>
                        <span style="color:var(--primary); font-size:1.2rem;">â”</span>
                    </div>
                </div>
            </div>
        </section>

        <section id="learn" class="section-view container">
            <div class="card-modern">
                <div class="chapter-header" onclick="toggleChapter(this)">
                    <div>
                        <div class="chapter-title">1.1 EinfÃ¼hrung (Ù…Ù‚Ø¯Ù…Ø©)</div>
                        <p class="ar chapter-sub">Ù…ÙØ§Ù‡ÙŠÙ… Ø£Ø³Ø§Ø³ÙŠØ©ØŒ Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</p>
                    </div>
                    <span>â–¼</span>
                </div>
                <div class="chapter-content">
                    <div class="term-box" style="background:#eef2ff;">
                        <div>
                            <div class="de"><strong>Definition:</strong> System zur Ermittlung & Verarbeitung von Informationen.</div>
                            <div class="ar" style="margin-top:5px; color:#555; font-size:0.9rem;">Ù†Ø¸Ø§Ù… Ù„ØªØ­Ø¯ÙŠØ¯ ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©.</div>
                        </div>
                    </div>
                    
                    <h4 style="margin:20px 0 10px; color:var(--primary);">Bereiche (Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„Ø£Ø±Ø¨Ø¹Ø©)</h4>
                    
                    <div class="term-box">
                        <div><div class="de" style="font-weight:600;">BuchfÃ¼hrung</div><div class="ar text-small">Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØªØ±Ø© (Ø±Ø¨Ø­/Ø®Ø³Ø§Ø±Ø©)</div></div>
                        <div class="tag">Zeitraum</div>
                    </div>
                    <div class="term-box">
                        <div><div class="de" style="font-weight:600;">Kalkulation</div><div class="ar text-small">Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ (Ø§Ù„Ù…Ù†ØªØ¬)</div></div>
                        <div class="tag">StÃ¼ck</div>
                    </div>
                    <div class="term-box">
                        <div><div class="de" style="font-weight:600;">Statistik</div><div class="ar text-small">Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¡</div></div>
                        <div class="tag">Vergleich</div>
                    </div>
                    <div class="term-box">
                        <div><div class="de" style="font-weight:600;">Planung</div><div class="ar text-small">Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ</div></div>
                        <div class="tag">Vorschau</div>
                    </div>
                </div>
            </div>

            <div class="card-modern">
                <div class="chapter-header" onclick="toggleChapter(this)">
                    <div>
                        <div class="chapter-title">1.2 Aufgaben (Ø§Ù„Ù…Ù‡Ø§Ù…)</div>
                        <p class="ar chapter-sub">Ø§Ù„ØªØ®Ø·ÙŠØ·ØŒ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ØŒ Ø§Ù„Ø±Ù‚Ø§Ø¨Ø©ØŒ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡</p>
                    </div>
                    <span>â–¼</span>
                </div>
                <div class="chapter-content">
                    <div style="display:grid; gap:10px;">
                        <div class="term-box" style="border-left: 4px solid var(--gold);">
                            <div>
                                <div class="de" style="font-weight:700;">1. Planung</div>
                                <div class="ar" style="font-size:0.9rem;">ØªÙˆÙÙŠØ± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ (Entscheidungsvorbereitung).</div>
                            </div>
                        </div>
                        <div class="term-box" style="border-left: 4px solid var(--gold);">
                            <div>
                                <div class="de" style="font-weight:700;">2. Dokumentation</div>
                                <div class="ar" style="font-size:0.9rem;">ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù„Ù„Ù…Ø³Ø§Ø¡Ù„Ø© (Rechenschaft).</div>
                            </div>
                        </div>
                        <div class="term-box" style="border-left: 4px solid var(--gold);">
                            <div>
                                <div class="de" style="font-weight:700;">3. Kontrolle</div>
                                <div class="ar" style="font-size:0.9rem;">Ø§Ù„Ø±Ù‚Ø§Ø¨Ø© ÙˆÙ…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù Ø¨Ø§Ù„ÙØ¹Ù„ÙŠ (Soll-Ist-Vergleich).</div>
                            </div>
                        </div>
                        <div class="term-box" style="border-left: 4px solid var(--gold);">
                            <div>
                                <div class="de" style="font-weight:700;">4. Steuerung</div>
                                <div class="ar" style="font-size:0.9rem;">ØªÙˆØ¬ÙŠÙ‡ Ø³Ù„ÙˆÙƒ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="dictionary" class="section-view container">
            <div class="search-sticky">
                <input type="text" id="searchInput" class="search-input" placeholder="ğŸ” Suche / Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…ØµØ·Ù„Ø­...">
            </div>
            <div id="dictList">
                </div>
        </section>

        <section id="flashcards" class="section-view container">
            <div class="fc-container">
                <div class="flashcard" onclick="flipCard()">
                    <div class="fc-inner" id="fc-inner">
                        <div class="fc-face fc-front">
                            <span style="font-size:3rem;">ğŸ‡©ğŸ‡ª</span>
                            <h2 style="font-size:3.5rem; color:var(--primary); margin:20px 0;" id="fc-abbr">AfA</h2>
                            <p style="color:#999; font-size:0.9rem;">Tippen zum Umdrehen</p>
                        </div>
                        <div class="fc-face fc-back">
                            <div id="fc-de" style="font-size:1.3rem; font-weight:700; margin-bottom:15px; line-height:1.4;">Absetzung fÃ¼r Abnutzung</div>
                            <hr style="width:50%; border:0; border-top:1px solid rgba(255,255,255,0.3); margin:10px 0;">
                            <div id="fc-ar" class="ar" style="font-size:1.6rem; font-weight:600;">Ø§Ù„Ø¥Ù‡Ù„Ø§Ùƒ</div>
                        </div>
                    </div>
                </div>
                <div class="fc-controls">
                    <button class="btn-circle" onclick="prevCard()">â®</button>
                    <button class="btn-circle" style="color:var(--success); transform:scale(1.1);" onclick="nextCard()">â¯</button>
                </div>
            </div>
        </section>

        <section id="exam" class="section-view container">
            <div id="exam-start" style="text-align:center; padding:60px 0;">
                <div style="font-size:5rem; margin-bottom:20px;">ğŸ“</div>
                <h2 style="margin-bottom:10px; font-weight:800;">AbschlussprÃ¼fung</h2>
                <p class="ar" style="color:var(--text-light); margin-bottom:40px; font-size:1.1rem;">
                    Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ Ù…Ù† 10 Ø£Ø³Ø¦Ù„Ø©.<br>
                    ÙŠØºØ·ÙŠ Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª ÙˆØ§Ù„Ù…ÙØ§Ù‡ÙŠÙ….
                </p>
                <button onclick="startExam()" style="background:var(--primary); color:white; border:none; padding:18px 50px; border-radius:40px; font-size:1.1rem; font-weight:700; box-shadow:0 10px 20px rgba(79, 70, 229, 0.4);">Starten / Ø§Ø¨Ø¯Ø£</button>
            </div>

            <div id="exam-quiz" style="display:none;">
                <div style="display:flex; justify-content:space-between; margin-bottom:20px; align-items:center;">
                    <span style="font-size:0.9rem; font-weight:600; background:#eef2ff; color:var(--primary); padding:5px 12px; border-radius:10px;">Question <span id="q-num">1</span>/10</span>
                    <span style="font-weight:bold; color:var(--text);">Score: <span id="q-score" style="color:var(--success);">0</span></span>
                </div>
                <div style="height:8px; background:#e2e8f0; border-radius:4px; margin-bottom:30px; overflow:hidden;">
                    <div id="p-bar" style="height:100%; background:var(--primary); width:0%; transition:0.4s ease;"></div>
                </div>
                
                <div style="margin-bottom:30px;">
                    <h3 id="q-text-de" style="margin-bottom:10px; font-size:1.3rem; color:var(--text);">...</h3>
                    <p id="q-text-ar" class="ar" style="color:var(--text-light); font-size:1.1rem;">...</p>
                </div>

                <div id="options-container"></div>
                
                <button id="next-btn" style="display:none; width:100%; padding:18px; background:var(--primary); color:white; border:none; border-radius:16px; margin-top:20px; font-size:1rem; font-weight:700; box-shadow:0 5px 15px rgba(79, 70, 229, 0.3);" onclick="nextQuestion()">NÃ¤chste Frage â”</button>
            </div>

            <div id="exam-result" style="display:none; text-align:center; padding-top:40px;">
                <div style="width:140px; height:140px; border-radius:50%; background:var(--accent-gradient); color:white; display:flex; align-items:center; justify-content:center; font-size:3rem; margin:0 auto 30px; font-weight:800; box-shadow:0 15px 30px rgba(79, 70, 229, 0.4);" id="final-score"></div>
                <h2>Ergebnis / Ø§Ù„Ù†ØªÙŠØ¬Ø©</h2>
                <p id="final-msg" class="ar" style="margin:20px 0; color:var(--text-light); font-size:1.2rem;">...</p>
                <button onclick="startExam()" style="padding:15px 40px; border:2px solid var(--primary); background:transparent; border-radius:30px; font-weight:bold; color:var(--primary); margin-top:20px;">Wiederholen (Ø¥Ø¹Ø§Ø¯Ø©)</button>
            </div>
        </section>

    </main>

    <div class="bottom-nav">
        <div class="b-nav-item active" onclick="nav('dashboard')">
            <div class="b-nav-icon">ğŸ </div> <span>Home</span>
        </div>
        <div class="b-nav-item" onclick="nav('learn')">
            <div class="b-nav-icon">ğŸ“–</div> <span>Lernen</span>
        </div>
        <div class="b-nav-item" onclick="nav('dictionary')">
            <div class="b-nav-icon">ğŸ”</div> <span>Suche</span>
        </div>
        <div class="b-nav-item" onclick="nav('flashcards')">
            <div class="b-nav-icon">ğŸ§ </div> <span>Cards</span>
        </div>
        <div class="b-nav-item" onclick="nav('exam')">
            <div class="b-nav-icon">ğŸ“</div> <span>Test</span>
        </div>
    </div>

<script>
    // --- COMPREHENSIVE DATA (A-Z) ---
    const abbreviations = [
        // A - B
        { abbr: "A", de: "Abschnitt", ar: "Ù…Ù‚Ø·Ø¹" },
        { abbr: "AB", de: "Anfangsbestand", ar: "Ø±ØµÙŠØ¯ Ø£ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø©" },
        { abbr: "AfA", de: "Absetzung fÃ¼r Abnutzung", ar: "Ø§Ù„Ø¥Ù‡Ù„Ø§Ùƒ" },
        { abbr: "AG", de: "Aktiengesellschaft", ar: "Ø´Ø±ÙƒØ© Ù…Ø³Ø§Ù‡Ù…Ø©" },
        { abbr: "AktG", de: "Aktiengesetz", ar: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©" },
        { abbr: "AK", de: "Anschaffungskosten", ar: "ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø­ÙŠØ§Ø²Ø©/Ø§Ù„Ø´Ø±Ø§Ø¡" },
        { abbr: "alul", de: "aus Lieferungen und Leistungen", ar: "Ù…Ù† Ø§Ù„ØªÙˆØ±ÙŠØ¯Ø§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª" },
        { abbr: "AN", de: "Arbeitnehmer", ar: "Ù…ÙˆØ¸Ù" },
        { abbr: "ANK", de: "Anschaffungsnebenkosten", ar: "ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©" },
        { abbr: "AO", de: "Abgabenordnung", ar: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠ" },
        { abbr: "AR", de: "Ausgangsrechnung", ar: "ÙØ§ØªÙˆØ±Ø© ØµØ§Ø¯Ø±Ø©" },
        { abbr: "AV", de: "AnlagevermÃ¶gen", ar: "Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ©" },
        { abbr: "B", de: "BerichtigungsschlÃ¼ssel", ar: "Ù…ÙØªØ§Ø­ Ø§Ù„ØªØµØ­ÙŠØ­" },
        { abbr: "BA", de: "Betriebsausgaben", ar: "Ù…ØµØ§Ø±ÙŠÙ ØªØ´ØºÙŠÙ„ÙŠØ©" },
        { abbr: "BdF", de: "Bundesminister der Finanzen", ar: "ÙˆØ²ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø§ØªØ­Ø§Ø¯ÙŠ" },
        { abbr: "BFH", de: "Bundesfinanzhof", ar: "Ù…Ø­ÙƒÙ…Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø§ØªØ­Ø§Ø¯ÙŠØ©" },
        { abbr: "BGA", de: "Betriebs- und GeschÃ¤ftsausstattung", ar: "ØªØ¬Ù‡ÙŠØ²Ø§Øª ØªØ´ØºÙŠÙ„ÙŠØ© ÙˆÙ…ÙƒØªØ¨ÙŠØ©" },
        { abbr: "BGB", de: "BÃ¼rgerliches Gesetzbuch", ar: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ù…Ø¯Ù†ÙŠ" },
        { abbr: "BilMoG", de: "Bilanzrechtsmodernisierungsgesetz", ar: "Ù‚Ø§Ù†ÙˆÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©" },
        { abbr: "BMF", de: "Bundesministerium der Finanzen", ar: "ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø§ØªØ­Ø§Ø¯ÙŠØ©" },
        { abbr: "BpO", de: "BetriebsprÃ¼fungsordnung", ar: "Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ" },
        { abbr: "BStBl", de: "Bundessteuerblatt", ar: "Ø§Ù„Ù…Ø¬Ù„Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ© Ø§Ù„Ø§ØªØ­Ø§Ø¯ÙŠØ©" },
        { abbr: "BuG", de: "Betriebs- und GeschÃ¤ftsausstattung", ar: "ØªØ¬Ù‡ÙŠØ²Ø§Øª ØªØ´ØºÙŠÙ„ÙŠØ© ÙˆÙ…ÙƒØªØ¨ÙŠØ©" },
        { abbr: "BV", de: "BetriebsvermÃ¶gen", ar: "Ø±Ø£Ø³ Ù…Ø§Ù„ Ø§Ù„Ù…Ù†Ø´Ø£Ø©" },
        { abbr: "BWA", de: "Betriebswirtschaftliche Auswertung", ar: "Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠ Ù„Ù„Ø£Ø¹Ù…Ø§Ù„" },

        // D - G
        { abbr: "DATEV", de: "Datenverarbeitungsorganisation", ar: "Ù…Ù†Ø¸Ù…Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª" },
        { abbr: "DB", de: "Der Betrieb", ar: "Ù…Ø¬Ù„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ (Ù…Ù‡Ù†ÙŠØ©)" },
        { abbr: "Eh.", de: "Einzelhandel", ar: "ØªØ¬Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø²Ø¦Ø©" },
        { abbr: "e.K.", de: "eingetragener Kaufmann", ar: "ØªØ§Ø¬Ø± Ù…Ø³Ø¬Ù„" },
        { abbr: "EK", de: "Eigenkapital", ar: "Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©" },
        { abbr: "ER", de: "Eingangsrechnung", ar: "ÙØ§ØªÙˆØ±Ø© ÙˆØ§Ø±Ø¯Ø©" },
        { abbr: "ESt", de: "Einkommensteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¯Ø®Ù„" },
        { abbr: "EStDV", de: "ESt-DurchfÃ¼hrungsverordnung", ar: "Ù„Ø§Ø¦Ø­Ø© ØªÙ†ÙÙŠØ° Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¯Ø®Ù„" },
        { abbr: "ESTH", de: "ESt-Handbuch", ar: "Ø¯Ù„ÙŠÙ„ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¯Ø®Ù„" },
        { abbr: "EStG", de: "Einkommensteuergesetz", ar: "Ù‚Ø§Ù†ÙˆÙ† Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¯Ø®Ù„" },
        { abbr: "EU", de: "EuropÃ¤ische Union", ar: "Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø£ÙˆØ±ÙˆØ¨ÙŠ" },
        { abbr: "EUSt", de: "Einfuhrumsatzsteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ©" },
        { abbr: "EV", de: "Eigenverbrauch", ar: "Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø´Ø®ØµÙŠ" },
        { abbr: "FA", de: "Finanzamt", ar: "Ù…ÙƒØªØ¨ Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨" },
        { abbr: "FK", de: "Fremdkapital", ar: "Ø§Ù„Ø®ØµÙˆÙ… / Ø§Ù„Ø¯ÙŠÙˆÙ†" },
        { abbr: "GewSt", de: "Gewerbesteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø©" },
        { abbr: "GKR", de: "Gemeinschaftskontenrahmen", ar: "Ù…Ø®Ø·Ø· Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø´ØªØ±Ùƒ" },
        { abbr: "GmbH", de: "Gesellschaft mit beschrÃ¤nkter Haftung", ar: "Ø´Ø±ÙƒØ© Ø°Ø§Øª Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ù…Ø­Ø¯ÙˆØ¯Ø©" },
        { abbr: "GoB", de: "GrundsÃ¤tze ordnungsgemÃ¤ÃŸer BuchfÃ¼hrung", ar: "Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø³Ù„ÙŠÙ…Ø©" },
        { abbr: "GuVK", de: "Gewinn- und Verlustkonto", ar: "Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø¦Ø±" },
        { abbr: "GuVR", de: "Gewinn- und Verlustrechnung", ar: "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø¦Ø±" },
        { abbr: "GWG", de: "geringwertiges Wirtschaftsgut", ar: "Ø£ØµÙˆÙ„ Ù…Ù†Ø®ÙØ¶Ø© Ø§Ù„Ù‚ÙŠÙ…Ø©" },

        // H - O
        { abbr: "H", de: "Haben", ar: "Ø¯Ø§Ø¦Ù† (Ù„Ù‡)" },
        { abbr: "HAÃœ", de: "HauptabschlussÃ¼bersicht", ar: "Ù…Ù„Ø®Øµ Ø§Ù„Ø¥Ù‚ÙØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ" },
        { abbr: "HB", de: "Handelsbilanz", ar: "Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©" },
        { abbr: "HGB", de: "Handelsgesetzbuch", ar: "Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„ØªØ¬Ø§Ø±ÙŠ" },
        { abbr: "HK", de: "Herstellungskosten", ar: "ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„ØªØµÙ†ÙŠØ¹" },
        { abbr: "HR", de: "Handelsregister", ar: "Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ" },
        { abbr: "IDW", de: "Institut der WirtschaftsprÃ¼fer", ar: "Ù…Ø¹Ù‡Ø¯ Ù…Ø¯Ù‚Ù‚ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª" },
        { abbr: "IKR", de: "Industriekontenrahmen", ar: "Ù…Ø®Ø·Ø· Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ" },
        { abbr: "K", de: "Kontokorrent", ar: "Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø§Ø±ÙŠ" },
        { abbr: "KG", de: "Kommanditgesellschaft", ar: "Ø´Ø±ÙƒØ© ØªÙˆØµÙŠØ© Ø¨Ø³ÙŠØ·Ø©" },
        { abbr: "KiSt", de: "Kirchensteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„ÙƒÙ†ÙŠØ³Ø©" },
        { abbr: "KSt", de: "KÃ¶rperschaftsteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª" },
        { abbr: "KV", de: "Krankenversicherung", ar: "Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„ØµØ­ÙŠ" },
        { abbr: "LSt", de: "Lohnsteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø£Ø¬ÙˆØ±" },
        { abbr: "m.Z.", de: "mit Zinsschein", ar: "Ù…Ø¹ Ù‚Ø³ÙŠÙ…Ø© ÙÙˆØ§Ø¦Ø¯" },
        { abbr: "ND", de: "Nutzungsdauer", ar: "Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠ" },
        { abbr: "OFD", de: "Oberfinanzdirektion", ar: "Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø¹Ù„ÙŠØ§" },
        { abbr: "OHG", de: "offene Handelsgesellschaft", ar: "Ø´Ø±ÙƒØ© ØªØ¶Ø§Ù…Ù† Ù…ÙØªÙˆØ­Ø©" },
        { abbr: "o.Z.", de: "ohne Zinsschein", ar: "Ø¨Ø¯ÙˆÙ† Ù‚Ø³ÙŠÙ…Ø© ÙÙˆØ§Ø¦Ø¯" },

        // P - S
        { abbr: "PV", de: "Pflegeversicherung", ar: "ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø±Ø¹Ø§ÙŠØ©" },
        { abbr: "PublG", de: "PublizitÃ¤tsgesetz", ar: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¥ÙØµØ§Ø­" },
        { abbr: "R", de: "Richtlinie", ar: "Ù…Ø¨Ø¯Ø£ ØªÙˆØ¬ÙŠÙ‡ÙŠ" },
        { abbr: "rkr.", de: "rechtskrÃ¤ftig", ar: "Ù…Ù„Ø²Ù… Ù‚Ø§Ù†ÙˆÙ†Ø§Ù‹" },
        { abbr: "RV", de: "Rentenversicherung", ar: "ØªØ£Ù…ÙŠÙ† Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯" },
        { abbr: "S", de: "Soll", ar: "Ù…Ø¯ÙŠÙ† (Ù…Ù†Ù‡)" },
        { abbr: "SB", de: "Schlussbestand", ar: "Ø±ØµÙŠØ¯ Ø§Ù„Ø¥Ù‚ÙØ§Ù„" },
        { abbr: "SBK", de: "Schlussbilanzkonto", ar: "Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø®ØªØ§Ù…ÙŠØ©" },
        { abbr: "SKR", de: "Spezialkontenrahmen", ar: "Ù…Ø®Ø·Ø· Ø­Ø³Ø§Ø¨Ø§Øª Ù…ØªØ®ØµØµ" },
        { abbr: "SoIZ", de: "SolidaritÃ¤tszuschlag", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„ØªØ¶Ø§Ù…Ù† Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©" },
        { abbr: "StB", de: "Steuerbilanz", ar: "Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠØ©" },
        { abbr: "SV", de: "Saldovortrag", ar: "ØªØ±Ø­ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯" },

        // T - Z
        { abbr: "Tz.", de: "Textziffer", ar: "Ø±Ù‚Ù… Ø§Ù„Ù†Øµ" },
        { abbr: "USt", de: "Umsatzsteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ©" },
        { abbr: "UStAE", de: "Umsatzsteuer-Anwendungserlass", ar: "Ù…Ø±Ø³ÙˆÙ… ØªØ·Ø¨ÙŠÙ‚ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª" },
        { abbr: "USt-IdNr.", de: "USt-Identifikationsnummer", ar: "Ø±Ù‚Ù… ØªØ¹Ø±ÙŠÙ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª" },
        { abbr: "UV", de: "UmlaufvermÃ¶gen", ar: "Ø£ØµÙˆÙ„ Ù…ØªØ¯Ø§ÙˆÙ„Ø©" },
        { abbr: "VoSt", de: "Vorsteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª" },
        { abbr: "VSt", de: "VermÃ¶gensteuer", ar: "Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø«Ø±ÙˆØ©" },
        { abbr: "VZ", de: "Veranlagungszeitraum", ar: "ÙØªØ±Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ" },
        { abbr: "WG", de: "Wechselgesetz", ar: "Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„ÙƒÙ…Ø¨ÙŠØ§Ù„Ø§Øª" },
        { abbr: "WP", de: "WirtschaftsprÃ¼fer", ar: "Ù…Ø¯Ù‚Ù‚ Ø­Ø³Ø§Ø¨Ø§Øª" },
        { abbr: "ZM", de: "Zusammenfassende Meldung", ar: "ØªÙ‚Ø±ÙŠØ± Ù…Ù„Ø®Øµ" }
    ];

    const concepts = [
        { q_de: "Was ist BuchfÃ¼hrung?", q_ar: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© (Ù…Ø³Ùƒ Ø§Ù„Ø¯ÙØ§ØªØ±)ØŸ", correct: "Zeitraumrechnung (Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØªØ±Ø©)", options: ["StÃ¼ckrechnung", "Vorschaurechnung", "Vergleichsrechnung"] },
        { q_de: "Was ist Kalkulation?", q_ar: "Ù…Ø§ Ù‡Ùˆ Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙØŸ", correct: "StÃ¼ckrechnung (Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆØ­Ø¯Ø©)", options: ["Zeitraumrechnung", "Bilanzierung", "SteuererklÃ¤rung"] },
        { q_de: "Interne Funktion des Rechnungswesens?", q_ar: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„Ù…Ø­Ø§Ø³Ø¨Ø©ØŸ", correct: "Planung und Kontrolle", options: ["Besteuerung", "PublizitÃ¤tspflicht", "Kreditaufnahme"] },
        { q_de: "Soll-Ist-Vergleich dient der...", q_ar: "Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…Ø®Ø·Ø· Ø¨Ø§Ù„ÙØ¹Ù„ÙŠ ØªØ®Ø¯Ù…...", correct: "Ãœberwachung (Ø§Ù„Ø±Ù‚Ø§Ø¨Ø©)", options: ["Dokumentation", "Buchung", "Inventur"] },
        { q_de: "Wer prÃ¼ft die Steuern?", q_ar: "Ù…Ù† ÙŠÙØ­Øµ Ø§Ù„Ø¶Ø±Ø§Ø¦Ø¨ØŸ", correct: "Finanzamt", options: ["Bank", "Kunde", "Lieferant"] },
        { q_de: "Was ist das HGB?", q_ar: "Ù…Ø§ Ù‡Ùˆ HGBØŸ", correct: "Handelsgesetzbuch", options: ["Hausgesetzbuch", "Handelsgesellschaft", "Hauptgesetzbuch"] }
    ];

    // --- NAVIGATION LOGIC ---
    function nav(id) {
        document.querySelectorAll('.section-view').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        
        // Desktop Nav
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const dIndex = ['dashboard','learn','dictionary','flashcards','exam'].indexOf(id);
        if(dIndex > -1) document.querySelectorAll('.nav-item')[dIndex].classList.add('active');

        // Mobile Nav
        document.querySelectorAll('.b-nav-item').forEach(el => el.classList.remove('active'));
        if(dIndex > -1) document.querySelectorAll('.b-nav-item')[dIndex].classList.add('active');

        const titles = {dashboard:"Dashboard", learn:"Lernen", dictionary:"WÃ¶rterbuch", flashcards:"Flashcards", exam:"PrÃ¼fung"};
        document.getElementById('header-title').innerText = titles[id];
        
        window.scrollTo(0,0);
    }

    function toggleChapter(header) {
        const content = header.nextElementSibling;
        const arrow = header.querySelector('span');
        content.style.display = content.style.display === "block" ? "none" : "block";
        arrow.innerText = content.style.display === "block" ? "â–²" : "â–¼";
    }

    // --- DICTIONARY RENDERER (ALPHABETICAL) ---
    const dictList = document.getElementById('dictList');
    
    function renderDict(items) {
        dictList.innerHTML = "";
        let currentLetter = "";
        
        // Sort items just in case
        items.sort((a,b) => a.abbr.localeCompare(b.abbr));

        items.forEach(item => {
            // Letter Header
            let firstChar = item.abbr.charAt(0).toUpperCase();
            if(firstChar !== currentLetter) {
                currentLetter = firstChar;
                dictList.innerHTML += `<div class="dict-group-title">${currentLetter}</div>`;
            }

            // Item
            dictList.innerHTML += `
                <div class="dict-item">
                    <div class="dict-top">
                        <div class="dict-abbr">${item.abbr}</div>
                        <div style="font-size:0.8rem; color:#999;">ğŸ‡©ğŸ‡ª DE</div>
                    </div>
                    <div style="font-weight:600; color:var(--text);">${item.de}</div>
                    <div class="ar" style="color:var(--text-light); border-top:1px dashed #eee; padding-top:8px;">${item.ar}</div>
                </div>`;
        });
    }

    document.getElementById('searchInput').addEventListener('input', (e) => {
        const val = e.target.value.toLowerCase();
        const filtered = abbreviations.filter(i => 
            i.abbr.toLowerCase().includes(val) || i.de.toLowerCase().includes(val) || i.ar.includes(val)
        );
        renderDict(filtered);
    });

    // --- FLASHCARDS LOGIC ---
    let fcIdx = 0;
    function renderCard() {
        const item = abbreviations[fcIdx];
        const inner = document.getElementById('fc-inner');
        inner.classList.remove('flipped'); // Reset flip
        
        // Wait for flip back animation to finish before changing text
        setTimeout(() => {
            document.getElementById('fc-abbr').innerText = item.abbr;
            document.getElementById('fc-de').innerText = item.de;
            document.getElementById('fc-ar').innerText = item.ar;
        }, 300);
    }
    function flipCard() { document.getElementById('fc-inner').classList.toggle('flipped'); }
    function nextCard() { 
        fcIdx = Math.floor(Math.random() * abbreviations.length); // Randomize for fun
        renderCard(); 
    }
    function prevCard() { 
        if(fcIdx === 0) fcIdx = abbreviations.length - 1; else fcIdx--;
        renderCard(); 
    }

    // --- EXAM LOGIC ---
    let questions = [], qIdx = 0, score = 0;

    function startExam() {
        // Generate Mix: 7 Abbreviations + 3 Concepts
        const pool = [];
        
        // Get random abbreviations
        const shuffledAbbr = [...abbreviations].sort(()=>0.5-Math.random()).slice(0,7);
        shuffledAbbr.forEach(a => {
            // Generate wrong options
            const wrongs = abbreviations.filter(x => x !== a).sort(()=>0.5-Math.random()).slice(0,3).map(x => x.de);
            pool.push({
                q_de: `Was bedeutet die AbkÃ¼rzung "${a.abbr}"?`,
                q_ar: `Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø§Ù„Ø§Ø®ØªØµØ§Ø±ØŸ`,
                correct: a.de,
                wrong: wrongs
            });
        });

        // Get random concepts
        const shuffledConcepts = [...concepts].sort(()=>0.5-Math.random()).slice(0,3);
        pool.push(...shuffledConcepts);
        
        questions = pool.sort(()=>0.5-Math.random());
        qIdx = 0; score = 0;
        
        document.getElementById('exam-start').style.display='none';
        document.getElementById('exam-result').style.display='none';
        document.getElementById('exam-quiz').style.display='block';
        showQuestion();
    }

    function showQuestion() {
        const q = questions[qIdx];
        document.getElementById('q-num').innerText = qIdx+1;
        document.getElementById('q-score').innerText = score;
        document.getElementById('p-bar').style.width = ((qIdx/questions.length)*100) + "%";
        
        document.getElementById('q-text-de').innerText = q.q_de;
        document.getElementById('q-text-ar').innerText = q.q_ar;
        document.getElementById('next-btn').style.display='none';

        const opts = [...q.wrong, q.correct].sort(()=>0.5-Math.random());
        const cont = document.getElementById('options-container');
        cont.innerHTML = "";
        
        opts.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAns(btn, opt, q.correct);
            cont.appendChild(btn);
        });
    }

    function checkAns(btn, ans, correct) {
        const all = document.querySelectorAll('.option-btn');
        all.forEach(b => b.disabled = true);
        
        if(ans === correct) {
            btn.classList.add('correct');
            score++;
        } else {
            btn.classList.add('wrong');
            all.forEach(b => { if(b.innerText === correct) b.classList.add('correct'); });
        }
        document.getElementById('q-score').innerText = score;
        document.getElementById('next-btn').style.display='block';
    }

    function nextQuestion() {
        qIdx++;
        if(qIdx < questions.length) showQuestion();
        else endExam();
    }

    function endExam() {
        document.getElementById('exam-quiz').style.display='none';
        document.getElementById('exam-result').style.display='block';
        document.getElementById('final-score').innerText = score + "/10";
        
        let msg = "";
        if(score >= 9) msg = "Ù…Ù…ØªØ§Ø²! (Sehr Gut) ğŸŒŸ";
        else if(score >= 6) msg = "Ø¬ÙŠØ¯! (Gut) ğŸ‘";
        else msg = "Ù„Ù„Ø£Ø³Ù (Nicht bestanden) ğŸ“š";
        document.getElementById('final-msg').innerText = msg;
    }

    // --- INIT ---
    window.onload = () => {
        document.getElementById('total-terms').innerText = abbreviations.length;
        renderDict(abbreviations);
        renderCard();
    };
</script>
</body>
</html>
