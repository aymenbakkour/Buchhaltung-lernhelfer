<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buchhaltung Lernen & Begriffe</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-dark: #2c3e50;
            --primary-light: #34495e;
            --accent: #3498db;
            --accent-hover: #2980b9;
            --white: #ffffff;
            --gray-bg: #f5f7fa;
            --gray-border: #dfe6e9;
            --success: #27ae60;
            --error: #c0392b;
            --text-color: #2c3e50;
            --shadow: 0 4px 6px rgba(0,0,0,0.08);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--gray-bg);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Common Styles */
        .ar-text { font-family: 'Cairo', sans-serif; direction: rtl; }
        .de-text { font-family: 'Roboto', sans-serif; text-align: left; }
        
        /* Header */
        header {
            background-color: var(--primary-dark);
            color: var(--white);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            flex-wrap: wrap;
        }

        header h1 { font-size: 1.5rem; }
        header span { font-family: 'Cairo', sans-serif; font-size: 0.9rem; opacity: 0.9; }

        /* Navigation */
        nav {
            background-color: var(--primary-light);
            display: flex;
            justify-content: center;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        nav button {
            background: none;
            border: none;
            color: var(--white);
            padding: 15px 20px;
            cursor: pointer;
            font-size: 1rem;
            font-family: 'Cairo', sans-serif;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        nav button:hover { background-color: rgba(255,255,255,0.1); }
        nav button.active { background-color: rgba(0,0,0,0.2); border-bottom-color: var(--accent); }

        /* Main Layout */
        main {
            flex: 1;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 20px;
        }

        .view-section { display: none; animation: fadeIn 0.4s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- SECTION: LERNEN (Split View) --- */
        .learning-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 15px;
            flex-shrink: 0;
            position: sticky;
            top: 80px;
        }

        .sidebar h3 {
            padding-bottom: 10px;
            border-bottom: 2px solid var(--gray-border);
            margin-bottom: 15px;
            font-family: 'Cairo', sans-serif;
            color: var(--accent);
        }

        .chapter-list { list-style: none; }
        .chapter-list li {
            padding: 12px 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 0.95rem;
            border-left: 3px solid transparent;
            margin-bottom: 5px;
        }
        .chapter-list li:hover { background-color: var(--gray-bg); }
        .chapter-list li.active {
            background-color: #eaf2f8;
            border-left-color: var(--accent);
            color: var(--primary-dark);
            font-weight: bold;
        }

        /* Content Area */
        .lesson-content {
            flex: 1;
            background: var(--white);
            padding: 30px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        .lesson-header {
            border-bottom: 1px solid var(--gray-border);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .lesson-header h2 { color: var(--primary-dark); font-size: 1.8rem; margin-bottom: 5px; }
        .lesson-header .subtitle { color: #7f8c8d; font-family: 'Cairo', sans-serif; }

        /* Typography within Lesson */
        .content-block { margin-bottom: 3.5rem; }
        .content-block h3 { color: var(--accent); margin-bottom: 1rem; border-left: 4px solid var(--accent); padding-left: 10px; font-size: 1.4rem; }
        .content-block h4 { color: var(--primary-light); margin: 15px 0 10px 0; font-size: 1.1rem; }
        
        .definition-box {
            background-color: #f8f9fa;
            border-left: 4px solid #f1c40f;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .info-box {
            background-color: #e8f6f3;
            border-left: 4px solid var(--success);
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .dual-lang {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        @media(min-width: 768px) {
            .dual-lang { grid-template-columns: 1fr 1fr; }
        }
        
        .lang-de { font-weight: 500; color: #2c3e50; }
        .lang-ar { font-family: 'Cairo', sans-serif; direction: rtl; color: #555; line-height: 1.8; }

        /* Grids */
        .areas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .area-card {
            border: 1px solid var(--gray-border);
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s;
            background: white;
            position: relative;
            overflow: hidden;
        }
        
        .area-card:hover { transform: translateY(-3px); box-shadow: var(--shadow); }
        .area-card::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 5px;
            background: var(--accent);
        }
        .area-num {
            font-size: 2rem;
            font-weight: bold;
            color: rgba(0,0,0,0.05);
            position: absolute;
            top: 10px; right: 15px;
        }

        .area-title { font-weight: bold; color: var(--primary-dark); font-size: 1.1rem; margin-bottom: 5px; }
        .area-sub { font-size: 0.85rem; color: var(--accent); font-weight: bold; text-transform: uppercase; margin-bottom: 10px; display: block;}

        /* Flow Chart Style */
        .flow-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        .flow-step {
            background: var(--primary-dark);
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
        }
        .flow-arrow {
            display: flex;
            align-items: center;
            color: var(--accent);
            font-size: 1.5rem;
        }

        /* --- SECTION: TOOLS STYLES --- */
        .search-box input {
            width: 100%; padding: 15px; border: 2px solid var(--gray-border);
            border-radius: 8px; font-size: 1.1rem; outline: none; transition: border-color 0.3s;
        }
        .search-box input:focus { border-color: var(--accent); }
        
        .table-wrapper { background: var(--white); border-radius: 8px; box-shadow: var(--shadow); overflow-x: auto; margin-top: 20px;}
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 15px; border-bottom: 1px solid var(--gray-border); text-align: left; }
        th { background: var(--primary-dark); color: white; }
        .td-ar { text-align: right; direction: rtl; font-family: 'Cairo', sans-serif; }
        .abbr-tag { background: var(--accent); color: white; padding: 3px 8px; border-radius: 4px; font-weight: bold; font-size: 0.9rem;}

        /* Flashcards & Quiz */
        .center-container { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 400px; }
        .card-scene { width: 100%; max-width: 500px; height: 280px; perspective: 1000px; cursor: pointer; }
        .flashcard { width: 100%; height: 100%; position: relative; transition: transform 0.6s; transform-style: preserve-3d; }
        .flashcard.flipped { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 12px; box-shadow: var(--shadow); background: white; text-align: center; padding: 20px;}
        .card-face.back { background: var(--accent); color: white; transform: rotateY(180deg); }
        
        .quiz-box { background: white; padding: 30px; border-radius: 12px; box-shadow: var(--shadow); max-width: 600px; width: 100%; text-align: center; }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .quiz-btn { padding: 15px; border: 2px solid var(--gray-border); background: white; border-radius: 8px; cursor: pointer; font-family: 'Cairo', sans-serif; font-size: 1rem; }
        .quiz-btn:hover { background: #f0f0f0; }
        .quiz-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .quiz-btn.wrong { background: var(--error); color: white; border-color: var(--error); }

        /* Responsive */
        @media (max-width: 768px) {
            .learning-container { flex-direction: column; }
            .sidebar { width: 100%; position: static; margin-bottom: 20px; }
        }

        /* Footer */
        footer { text-align: center; padding: 2rem; color: #95a5a6; font-size: 0.9rem; margin-top: auto; }
    </style>
</head>
<body>

<header>
    <div>
        <h1>Buchhaltung Pro</h1>
    </div>
    <span>المحاسبة الألمانية للمتحدثين بالعربية</span>
</header>

<nav>
    <button class="nav-btn active" onclick="switchTab('learn')">الدروس / Lernen</button>
    <button class="nav-btn" onclick="switchTab('dictionary')">القاموس / Wörterbuch</button>
    <button class="nav-btn" onclick="switchTab('flashcards')">البطاقات / Karteikarten</button>
    <button class="nav-btn" onclick="switchTab('quiz')">الاختبار / Quiz</button>
</nav>

<main>
    
    <section id="learn" class="view-section active">
        <div class="learning-container">
            <aside class="sidebar">
                <h3>الفهرس / Inhalt</h3>
                <ul class="chapter-list">
                    <li class="active" onclick="scrollToId('lesson-1-1')">1.1 Einführung & Begriffe</li>
                    <li class="active" onclick="scrollToId('lesson-1-2')">1.2 Aufgaben (المهام)</li>
                    <li style="opacity: 0.5; cursor: not-allowed;">2. Bilanz (Demnächst / قريباً)</li>
                </ul>
            </aside>

            <article class="lesson-content">
                <div class="lesson-header">
                    <h2>1. Grundlagen der Buchführung</h2>
                    <p class="subtitle">أساسيات مسك الدفاتر للمنشآت الصناعية والتجارية</p>
                </div>

                <div id="lesson-1-1" class="content-block">
                    <h3>1.1 Einführung in das betriebliche Rechnungswesen</h3>
                    <div class="definition-box">
                        <div class="dual-lang">
                            <div class="lang-de">
                                <strong>Begriff:</strong> Das betriebliche Rechnungswesen ist ein System zur Ermittlung, Verarbeitung, Speicherung und Abgabe von Informationen über ausgewählte wirtschaftliche und rechtliche Vorgänge eines Betriebes.
                            </div>
                            <div class="lang-ar">
                                <strong>المفهوم:</strong> نظام المحاسبة في الشركات هو نظام لتحديد ومعالجة وتخزين وتقديم معلومات حول عمليات اقتصادية وقانونية مختارة للمنشأة.
                            </div>
                        </div>
                    </div>

                    <h4>Die 4 Teilbereiche (المجالات الأربعة)</h4>
                    <div class="areas-grid">
                        <div class="area-card">
                            <span class="area-num">1</span>
                            <div class="area-title">Buchführung</div>
                            <span class="area-sub">Zeitraumrechnung</span>
                            <div class="lang-ar" style="font-size: 0.9rem; color: #666; border-top: 1px dashed #ccc; padding-top: 5px;">
                                حساب الفترة: تحديد الربح والخسارة.
                            </div>
                        </div>
                        <div class="area-card">
                            <span class="area-num">2</span>
                            <div class="area-title">Kalkulation</div>
                            <span class="area-sub">Stückrechnung</span>
                            <div class="lang-ar" style="font-size: 0.9rem; color: #666; border-top: 1px dashed #ccc; padding-top: 5px;">
                                حساب التكاليف: تحديد تكلفة المنتج الواحد.
                            </div>
                        </div>
                        <div class="area-card">
                            <span class="area-num">3</span>
                            <div class="area-title">Statistik</div>
                            <span class="area-sub">Vergleichsrechnung</span>
                            <div class="lang-ar" style="font-size: 0.9rem; color: #666; border-top: 1px dashed #ccc; padding-top: 5px;">
                                الإحصاء: مقارنة الأرقام الحالية والسابقة.
                            </div>
                        </div>
                        <div class="area-card">
                            <span class="area-num">4</span>
                            <div class="area-title">Planung</div>
                            <span class="area-sub">Vorschaurechnung</span>
                            <div class="lang-ar" style="font-size: 0.9rem; color: #666; border-top: 1px dashed #ccc; padding-top: 5px;">
                                التخطيط: التنبؤ بالمستقبل (Sollzahlen).
                            </div>
                        </div>
                    </div>
                </div>

                <hr style="border: 0; border-top: 1px solid #eee; margin: 40px 0;">

                <div id="lesson-1-2" class="content-block">
                    <h3>1.2 Aufgaben des betrieblichen Rechnungswesens</h3>
                    <p class="subtitle" style="margin-bottom: 20px;">مهام المحاسبة في الشركات</p>

                    <h4>أ. المهام الأربعة الرئيسية (Die 4 Aufgaben)</h4>
                    <div class="areas-grid">
                        <div class="area-card">
                            <span class="area-num">1</span>
                            <div class="area-title">Entscheidungsvorbereitung</div>
                            <span class="area-sub">Dokumentation (التوثيق)</span>
                            <div class="lang-de" style="font-size: 0.9rem; margin-bottom: 5px;">
                                Ermittlung von Prognoseinformationen zur Unterstützung der Planung.
                            </div>
                            <div class="lang-ar" style="font-size: 0.9rem; color: #666; border-top: 1px dashed #ccc; padding-top: 5px;">
                                توفير معلومات مستقبلية لدعم التخطيط واتخاذ القرارات.
                            </div>
                        </div>

                        <div class="area-card">
                            <span class="area-num">2</span>
                            <div class="area-title">Rechenschaftslegung</div>
                            <span class="area-sub">Dokumentation (المساءلة والتوثيق)</span>
                            <div class="lang-de" style="font-size: 0.9rem; margin-bottom: 5px;">
                                Ermittlung von Vergangenheitsinformationen.
                            </div>
                            <div class="lang-ar" style="font-size: 0.9rem; color: #666; border-top: 1px dashed #ccc; padding-top: 5px;">
                                تحديد معلومات الماضي لغرض التوثيق والمساءلة القانونية.
                            </div>
                        </div>

                        <div class="area-card">
                            <span class="area-num">3</span>
                            <div class="area-title">Überwachung</div>
                            <span class="area-sub">Kontrolle (الرقابة)</span>
                            <div class="lang-de" style="font-size: 0.9rem; margin-bottom: 5px;">
                                Ermittlung von <strong>Soll-Ist-Abweichungen</strong>.
                            </div>
                            <div class="lang-ar" style="font-size: 0.9rem; color: #666; border-top: 1px dashed #ccc; padding-top: 5px;">
                                تحديد الانحرافات بين المستهدف (Soll) والفعلي (Ist) للرقابة.
                            </div>
                        </div>

                        <div class="area-card">
                            <span class="area-num">4</span>
                            <div class="area-title">Steuerung</div>
                            <span class="area-sub">Lenkung (التوجيه)</span>
                            <div class="lang-de" style="font-size: 0.9rem; margin-bottom: 5px;">
                                Steuerung fremden Verhaltens in Richtung auf betriebszielerfüllende Handlungsweisen.
                            </div>
                            <div class="lang-ar" style="font-size: 0.9rem; color: #666; border-top: 1px dashed #ccc; padding-top: 5px;">
                                توجيه سلوك الآخرين لتحقيق أهداف الشركة.
                            </div>
                        </div>
                    </div>

                    <h4 style="margin-top: 30px;">ب. أهمية المعلومات (داخلياً وخارجياً)</h4>
                    <div class="info-box">
                        <div class="dual-lang">
                            <div class="lang-de">
                                <strong>Interne Funktion (Unternehmensführung):</strong><br>
                                Dient als <em>Entscheidungsgrundlage</em> (z.B. für Investitionen) und als <em>Frühwarnsystem</em> beim Abweichen von vorgegebenen Werten.
                            </div>
                            <div class="lang-ar">
                                <strong>الوظيفة الداخلية (للإدارة):</strong><br>
                                تعمل كأساس لاتخاذ القرارات (مثل الاستثمارات) وكـ <em>نظام إنذار مبكر</em> عند الانحراف عن القيم المحددة مسبقاً.
                            </div>
                        </div>
                        <div class="dual-lang" style="margin-top: 15px; border-top: 1px solid rgba(0,0,0,0.1); padding-top: 15px;">
                            <div class="lang-de">
                                <strong>Externe Funktion (Außenwelt):</strong><br>
                                1. <em>Publizitätspflicht:</em> Große Kapitalgesellschaften (z.B. AG) müssen Bilanz & GuV im Bundesanzeiger veröffentlichen (§ 325 HGB).<br>
                                2. <em>Besteuerung:</em> Finanzamt prüft Steuern basierend auf Umsatz und Gewinn.
                            </div>
                            <div class="lang-ar">
                                <strong>الوظيفة الخارجية (للعالم الخارجي):</strong><br>
                                1. <em>واجب النشر:</em> الشركات الكبرى (مثل AG) ملزمة بنشر الميزانية في الجريدة الرسمية.<br>
                                2. <em>الضرائب:</em> مكتب الضرائب يفحص الالتزام الضريبي بناءً على الأرباح والمبيعات.
                            </div>
                        </div>
                    </div>

                    <h4 style="margin-top: 30px;">ج. النظام الديناميكي (Das dynamische System)</h4>
                    <p>كيفية تدفق المعلومات في المحاسبة / Wie Informationen fließen:</p>
                    
                    <div class="flow-container">
                        <div class="flow-step">1. Erfassung (الجمع) <br><small>z.B. Belege</small></div>
                        <div class="flow-arrow">&#8594;</div>
                        <div class="flow-step">2. Speicherung (الحفظ) <br><small>z.B. Kontierung</small></div>
                        <div class="flow-arrow">&#8594;</div>
                        <div class="flow-step">3. Verarbeitung (المعالجة) <br><small>z.B. Buchung</small></div>
                        <div class="flow-arrow">&#8594;</div>
                        <div class="flow-step">4. Abgabe (التقديم) <br><small>z.B. Bilanz</small></div>
                    </div>
                </div>

            </article>
        </div>
    </section>

    <section id="dictionary" class="view-section">
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Suche nach Abkürzung oder Begriff (z.B. GuV, ضريبة)...">
        </div>
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th width="15%">Abk.</th>
                        <th width="40%">Deutsch</th>
                        <th width="45%" style="text-align: right;">Arabisch</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </section>

    <section id="flashcards" class="view-section">
        <div class="center-container">
            <div class="card-scene">
                <div class="flashcard" id="flashcard" onclick="this.classList.toggle('flipped')">
                    <div class="card-face front">
                        <h2 id="fc-abbr" style="font-size: 4rem; color: var(--accent);">AfA</h2>
                        <p style="color: #999; margin-top: 10px;">انقر للقلب / Klicken</p>
                    </div>
                    <div class="card-face back">
                        <div id="fc-de" style="font-size: 1.5rem; font-weight: bold; margin-bottom: 10px;">Absetzung für Abnutzung</div>
                        <div id="fc-ar" class="ar-text" style="font-size: 1.5rem;">الإهلاك</div>
                    </div>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <button class="nav-btn" style="background: var(--primary-dark); color: white;" onclick="prevCard()">السابق</button>
                <button class="nav-btn" style="background: var(--primary-dark); color: white;" onclick="nextCard()">التالي</button>
            </div>
        </div>
    </section>

    <section id="quiz" class="view-section">
        <div class="center-container">
            <div class="quiz-box">
                <div style="display:flex; justify-content:space-between; border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:20px;">
                    <span>النقاط: <strong id="score">0</strong></span>
                    <span>سؤال: <strong id="q-num">1</strong></span>
                </div>
                <p>Was bedeutet / ما معنى:</p>
                <h2 id="quiz-abbr" style="font-size: 3rem; color: var(--accent); margin: 10px 0;">?</h2>
                
                <div class="options-grid" id="quiz-options"></div>
                <div id="quiz-feedback" style="margin-top: 15px; font-weight: bold; min-height: 25px;"></div>
                <button id="next-quiz-btn" style="display:none; margin: 15px auto; padding: 10px 20px; background: var(--primary-dark); color: white; border: none; border-radius: 5px; cursor: pointer;" onclick="nextQuestion()">Next Question</button>
            </div>
        </div>
    </section>

</main>

<footer>
    &copy; 2026 Accounting Learning Tool | Buchhaltung Deutsch-Arabisch
</footer>

<script>
    // --- DATA ---
    const data = [
        { abbr: "A", de: "Abschnitt", ar: "مقطع" },
        { abbr: "AB", de: "Anfangsbestand", ar: "رصيد أول المدة" },
        { abbr: "AfA", de: "Absetzung für Abnutzung", ar: "الإهلاك" },
        { abbr: "AG", de: "Aktiengesellschaft", ar: "شركة مساهمة" },
        { abbr: "AktG", de: "Aktiengesetz", ar: "قانون الشركات المساهمة" },
        { abbr: "AK", de: "Anschaffungskosten", ar: "تكاليف الحيازة/الشراء" },
        { abbr: "alul", de: "aus Lieferungen und Leistungen", ar: "من التوريدات والخدمات" },
        { abbr: "AN", de: "Arbeitnehmer", ar: "موظف" },
        { abbr: "ANK", de: "Anschaffungsnebenkosten", ar: "تكاليف الشراء الجانبية" },
        { abbr: "AO", de: "Abgabenordnung", ar: "قانون الضرائب الألماني" },
        { abbr: "AR", de: "Ausgangsrechnung", ar: "فاتورة صادرة" },
        { abbr: "AV", de: "Anlagevermögen", ar: "الأصول الثابتة" },
        { abbr: "BGA", de: "Betriebs- und Geschäftsausstattung", ar: "تجهيزات تشغيلية ومكتبية" },
        { abbr: "BilMoG", de: "Bilanzrechtsmodernisierungsgesetz", ar: "قانون تحديث المحاسبة" },
        { abbr: "BMF", de: "Bundesministerium der Finanzen", ar: "وزارة المالية الاتحادية" },
        { abbr: "BV", de: "Betriebsvermögen", ar: "أصول المنشأة" },
        { abbr: "BWA", de: "Betriebswirtschaftliche Auswertung", ar: "التقييم الاقتصادي للأعمال" },
        { abbr: "EK", de: "Eigenkapital", ar: "حقوق الملكية" },
        { abbr: "ER", de: "Eingangsrechnung", ar: "فاتورة واردة" },
        { abbr: "ESt", de: "Einkommensteuer", ar: "ضريبة الدخل" },
        { abbr: "EStG", de: "Einkommensteuergesetz", ar: "قانون ضريبة الدخل" },
        { abbr: "FK", de: "Fremdkapital", ar: "رأس المال المقترض (الخصوم)" },
        { abbr: "GewSt", de: "Gewerbesteuer", ar: "ضريبة التجارة" },
        { abbr: "GmbH", de: "Gesellschaft mit beschränkter Haftung", ar: "شركة ذات مسؤولية محدودة" },
        { abbr: "GoB", de: "Grundsätze ordnungsgemäßer Buchführung", ar: "مبادئ المحاسبة السليمة" },
        { abbr: "GuV", de: "Gewinn- und Verlustrechnung", ar: "حساب الأرباح والخسائر" },
        { abbr: "GWG", de: "Geringwertiges Wirtschaftsgut", ar: "أصل منخفض القيمة" },
        { abbr: "H", de: "Haben", ar: "دائن (له)" },
        { abbr: "HB", de: "Handelsbilanz", ar: "الميزانية التجارية" },
        { abbr: "HGB", de: "Handelsgesetzbuch", ar: "القانون التجاري" },
        { abbr: "HK", de: "Herstellungskosten", ar: "تكاليف التصنيع" },
        { abbr: "K", de: "Kontokorrent", ar: "حساب جاري" },
        { abbr: "KG", de: "Kommanditgesellschaft", ar: "شركة توصية" },
        { abbr: "KSt", de: "Körperschaftsteuer", ar: "ضريبة الشركات" },
        { abbr: "LSt", de: "Lohnsteuer", ar: "ضريبة الأجور" },
        { abbr: "OHG", de: "Offene Handelsgesellschaft", ar: "شركة تضامن" },
        { abbr: "S", de: "Soll", ar: "مدين (منه)" },
        { abbr: "SBK", de: "Schlussbilanzkonto", ar: "حساب الميزانية الختامية" },
        { abbr: "SKR", de: "Spezialkontenrahmen", ar: "دليل الحسابات الخاص" },
        { abbr: "USt", de: "Umsatzsteuer", ar: "ضريبة المبيعات/القيمة المضافة" },
        { abbr: "UV", de: "Umlaufvermögen", ar: "الأصول المتداولة" },
        { abbr: "VoSt", de: "Vorsteuer", ar: "ضريبة المدخلات (المشتريات)" },
        { abbr: "VZ", de: "Veranlagungszeitraum", ar: "الفترة الضريبية" },
        { abbr: "WP", de: "Wirtschaftsprüfer", ar: "محاسب قانوني / مدقق" }
    ];

    // --- LOGIC ---
    let currentCardIndex = 0;
    let quizScore = 0;
    let questionCount = 1;
    let currentQuizItem = null;

    // Initialization
    window.onload = function() {
        renderTable(data);
        renderFlashcard();
        generateQuiz();
    };

    // Tab Switching
    function switchTab(tabId) {
        document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        const buttons = document.querySelectorAll('.nav-btn');
        if(tabId === 'learn') buttons[0].classList.add('active');
        if(tabId === 'dictionary') buttons[1].classList.add('active');
        if(tabId === 'flashcards') buttons[2].classList.add('active');
        if(tabId === 'quiz') buttons[3].classList.add('active');
    }

    // Scroll to section in lesson
    function scrollToId(id) {
        const element = document.getElementById(id);
        if(element) {
            element.scrollIntoView({ behavior: 'smooth' });
        }
    }

    // Dictionary Logic
    function renderTable(items) {
        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = '';
        if(items.length === 0) {
            tbody.innerHTML = '<tr><td colspan="3" style="text-align:center;">Keine Daten / لا توجد نتائج</td></tr>';
            return;
        }
        items.forEach(item => {
            tbody.innerHTML += `
                <tr>
                    <td><span class="abbr-tag">${item.abbr}</span></td>
                    <td class="de-text">${item.de}</td>
                    <td class="td-ar">${item.ar}</td>
                </tr>
            `;
        });
    }

    document.getElementById('searchInput').addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        const filtered = data.filter(i => 
            i.abbr.toLowerCase().includes(term) || 
            i.de.toLowerCase().includes(term) || 
            i.ar.includes(term)
        );
        renderTable(filtered);
    });

    // Flashcard Logic
    function renderFlashcard() {
        const item = data[currentCardIndex];
        const card = document.getElementById('flashcard');
        card.classList.remove('flipped');
        
        setTimeout(() => {
            document.getElementById('fc-abbr').textContent = item.abbr;
            document.getElementById('fc-de').textContent = item.de;
            document.getElementById('fc-ar').textContent = item.ar;
        }, 200);
    }

    window.nextCard = () => {
        currentCardIndex = (currentCardIndex + 1) % data.length;
        renderFlashcard();
    };
    window.prevCard = () => {
        currentCardIndex = (currentCardIndex - 1 + data.length) % data.length;
        renderFlashcard();
    };

    // Quiz Logic
    window.generateQuiz = () => {
        const feedback = document.getElementById('quiz-feedback');
        const nextBtn = document.getElementById('next-quiz-btn');
        feedback.textContent = '';
        nextBtn.style.display = 'none';

        const randIndex = Math.floor(Math.random() * data.length);
        currentQuizItem = data[randIndex];
        document.getElementById('quiz-abbr').textContent = currentQuizItem.abbr;

        let options = [currentQuizItem];
        while(options.length < 4) {
            let rand = data[Math.floor(Math.random() * data.length)];
            if(!options.includes(rand)) options.push(rand);
        }
        options.sort(() => Math.random() - 0.5);

        const grid = document.getElementById('quiz-options');
        grid.innerHTML = '';
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'quiz-btn';
            btn.textContent = opt.ar;
            btn.onclick = () => checkAnswer(opt, btn);
            grid.appendChild(btn);
        });
    };

    function checkAnswer(selected, btn) {
        const allBtns = document.querySelectorAll('.quiz-btn');
        allBtns.forEach(b => b.disabled = true);
        const feedback = document.getElementById('quiz-feedback');

        if(selected.abbr === currentQuizItem.abbr) {
            btn.classList.add('correct');
            feedback.textContent = 'Correct! / صحيح';
            feedback.style.color = 'var(--success)';
            quizScore++;
            document.getElementById('score').textContent = quizScore;
        } else {
            btn.classList.add('wrong');
            feedback.textContent = `Falsch. Richtig: ${currentQuizItem.ar}`;
            feedback.style.color = 'var(--error)';
            allBtns.forEach(b => {
                if(b.textContent === currentQuizItem.ar) b.classList.add('correct');
            });
        }
        document.getElementById('next-quiz-btn').style.display = 'block';
    }

    window.nextQuestion = () => {
        questionCount++;
        document.getElementById('q-num').textContent = questionCount;
        generateQuiz();
    };

</script>
</body>
</html>
